<!DOCTYPE html>
<html lang="en" class="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>FinTrack — Recurring</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    :root {
      --background: oklch(0.14 0.005 260); --foreground: oklch(0.95 0.005 260);
      --card: oklch(0.18 0.005 260); --primary: oklch(0.72 0.17 162);
      --primary-foreground: oklch(0.14 0.005 260); --muted: oklch(0.22 0.005 260);
      --muted-foreground: oklch(0.65 0.01 260); --border: oklch(0.25 0.005 260);
      --sidebar: oklch(0.12 0.005 260); --destructive: oklch(0.65 0.2 25);
      --accent: oklch(0.65 0.12 195); --radius: 0.625rem;
    }
    body { background: var(--background); color: var(--foreground); font-family: system-ui, sans-serif; margin: 0; }
    .card { background: var(--card); border: 1px solid var(--border); border-radius: var(--radius); }
    .badge { display: inline-flex; align-items: center; border-radius: 9999px; padding: 2px 10px; font-size: 11px; font-weight: 600; }
    .badge-green { background: rgba(21,128,61,0.3); color: #4ade80; }
    .badge-red { background: rgba(153,27,27,0.3); color: #f87171; }
    .badge-amber { background: rgba(146,64,14,0.3); color: #fbbf24; }
    .badge-blue { background: rgba(30,58,138,0.3); color: #93c5fd; }
    .badge-gray { background: rgba(75,85,99,0.4); color: #9ca3af; }
    .nav-active { background: var(--primary); color: var(--primary-foreground); border-radius: 0.5rem; }
    .nav-item { display: flex; align-items: center; gap: 12px; padding: 8px 12px; font-size: 14px; font-weight: 500; color: var(--muted-foreground); border-radius: 0.5rem; text-decoration: none; transition: background 0.15s; }
    .nav-item:hover { background: var(--muted); color: var(--foreground); }
    .nav-active { color: var(--primary-foreground) !important; }
    .btn-primary { background: var(--primary); color: var(--primary-foreground); border: none; border-radius: 0.5rem; padding: 8px 16px; font-size: 14px; font-weight: 500; cursor: pointer; }
    .btn-ghost { background: transparent; border: 1px solid var(--border); border-radius: 0.5rem; padding: 6px 14px; font-size: 13px; color: var(--muted-foreground); cursor: pointer; }
    .btn-ghost:hover { background: var(--muted); }
    .icon-btn { background: transparent; border: none; padding: 6px; border-radius: 0.375rem; cursor: pointer; color: var(--muted-foreground); }
    .icon-btn:hover { background: var(--muted); color: var(--foreground); }
    .sheet-label { font-size: 12px; font-weight: 500; color: var(--muted-foreground); margin-bottom: 6px; display: block; }
    .sheet-input { width: 100%; background: var(--muted); border: 1px solid var(--border); border-radius: 0.5rem; padding: 9px 12px; color: var(--foreground); font-size: 14px; box-sizing: border-box; }
    .sheet-input:focus { outline: 1px solid var(--primary); }
    .sheet-select { width: 100%; background: var(--muted); border: 1px solid var(--border); border-radius: 0.5rem; padding: 9px 12px; color: var(--foreground); font-size: 14px; box-sizing: border-box; appearance: none; cursor: pointer; }
  </style>
</head>
<body class="flex min-h-screen">

<!-- ═══════════════════════════════════════════════
     OVERLAY (shared by all sheets)
════════════════════════════════════════════════ -->
<div id="overlay" style="display:none;position:fixed;inset:0;background:rgba(0,0,0,0.55);z-index:50;" onclick="closeAllSheets()"></div>

<!-- ═══════════════════════════════════════════════
     ADD RECURRING SHEET
════════════════════════════════════════════════ -->
<div id="add-sheet" style="display:none;position:fixed;top:0;right:0;height:100%;width:440px;max-width:95vw;background:var(--card);border-left:1px solid var(--border);z-index:51;padding:24px;box-sizing:border-box;overflow-y:auto;">
  <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:24px;">
    <h2 style="font-size:18px;font-weight:700;margin:0;">New Recurring Rule</h2>
    <button class="icon-btn" onclick="closeAllSheets()" style="font-size:18px;">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
    </button>
  </div>
  <div style="display:flex;flex-direction:column;gap:16px;">
    <div>
      <label class="sheet-label">Service / Description</label>
      <input class="sheet-input" type="text" placeholder="e.g. Netflix, Gym Membership" />
    </div>
    <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px;">
      <div>
        <label class="sheet-label">Amount (₱)</label>
        <input class="sheet-input" type="number" placeholder="0.00" min="0" step="0.01" />
      </div>
      <div>
        <label class="sheet-label">Type</label>
        <select class="sheet-select">
          <option>Expense</option>
          <option>Income</option>
        </select>
      </div>
    </div>
    <div>
      <label class="sheet-label">Category</label>
      <select class="sheet-select">
        <option>Subscriptions</option>
        <option>Food &amp; Dining</option>
        <option>Health &amp; Fitness</option>
        <option>Utilities</option>
        <option>Transportation</option>
        <option>Entertainment</option>
        <option>Salary / Income</option>
        <option>Other</option>
      </select>
    </div>
    <div>
      <label class="sheet-label">Account / Card</label>
      <select class="sheet-select">
        <option>BPI Checking</option>
        <option>BPI Savings</option>
        <option>BPI Credit Card</option>
        <option>GCash</option>
        <option>Cash</option>
      </select>
    </div>
    <div>
      <label class="sheet-label">Frequency</label>
      <select class="sheet-select">
        <option>Monthly</option>
        <option>Weekly</option>
        <option>Yearly</option>
        <option>Every 2 weeks</option>
      </select>
    </div>
    <div>
      <label class="sheet-label">Next Due Date</label>
      <input class="sheet-input" type="date" value="2026-03-01" />
    </div>
    <div style="display:flex;gap:8px;padding-top:8px;">
      <button class="btn-ghost" onclick="closeAllSheets()" style="flex:1;">Cancel</button>
      <button class="btn-primary" onclick="closeAllSheets()" style="flex:2;">Save Rule</button>
    </div>
  </div>
</div>

<!-- ═══════════════════════════════════════════════
     EDIT SHEET (pre-filled, one for all rows)
════════════════════════════════════════════════ -->
<div id="edit-sheet" style="display:none;position:fixed;top:0;right:0;height:100%;width:440px;max-width:95vw;background:var(--card);border-left:1px solid var(--border);z-index:51;padding:24px;box-sizing:border-box;overflow-y:auto;">
  <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:24px;">
    <h2 style="font-size:18px;font-weight:700;margin:0;">Edit Recurring Rule</h2>
    <button class="icon-btn" onclick="closeAllSheets()">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
    </button>
  </div>
  <div style="display:flex;flex-direction:column;gap:16px;">
    <div>
      <label class="sheet-label">Service / Description</label>
      <input id="edit-name" class="sheet-input" type="text" />
    </div>
    <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px;">
      <div>
        <label class="sheet-label">Amount (₱)</label>
        <input id="edit-amount" class="sheet-input" type="number" min="0" step="0.01" />
      </div>
      <div>
        <label class="sheet-label">Type</label>
        <select class="sheet-select">
          <option>Expense</option>
          <option>Income</option>
        </select>
      </div>
    </div>
    <div>
      <label class="sheet-label">Category</label>
      <select class="sheet-select">
        <option>Subscriptions</option>
        <option>Food &amp; Dining</option>
        <option>Health &amp; Fitness</option>
        <option>Utilities</option>
        <option>Transportation</option>
        <option>Entertainment</option>
        <option>Salary / Income</option>
        <option>Other</option>
      </select>
    </div>
    <div>
      <label class="sheet-label">Account / Card</label>
      <select id="edit-account" class="sheet-select">
        <option>BPI Checking</option>
        <option>BPI Savings</option>
        <option>BPI Credit Card</option>
        <option>GCash</option>
        <option>Cash</option>
      </select>
    </div>
    <div>
      <label class="sheet-label">Frequency</label>
      <select class="sheet-select">
        <option>Monthly</option>
        <option>Weekly</option>
        <option>Yearly</option>
        <option>Every 2 weeks</option>
      </select>
    </div>
    <div>
      <label class="sheet-label">Next Due Date</label>
      <input id="edit-date" class="sheet-input" type="date" />
    </div>
    <div style="display:flex;gap:8px;padding-top:8px;">
      <button class="btn-ghost" onclick="closeAllSheets()" style="flex:1;">Cancel</button>
      <button class="btn-primary" onclick="closeAllSheets()" style="flex:2;">Save Changes</button>
    </div>
  </div>
</div>

<!-- ═══════════════════════════════════════════════
     DELETE CONFIRMATION MODAL
════════════════════════════════════════════════ -->
<div id="delete-modal" style="display:none;position:fixed;inset:0;background:rgba(0,0,0,0.6);z-index:60;align-items:center;justify-content:center;">
  <div style="background:var(--card);border:1px solid var(--border);border-radius:0.625rem;padding:24px;width:400px;max-width:90vw;" onclick="event.stopPropagation()">
    <h2 style="font-size:18px;font-weight:600;margin:0 0 8px;">Delete recurring rule?</h2>
    <p id="delete-modal-desc" style="font-size:14px;color:var(--muted-foreground);margin:0 0 24px;">This cannot be undone. The rule will stop generating transactions.</p>
    <div style="display:flex;gap:8px;justify-content:flex-end;">
      <button onclick="closeDeleteModal()" style="background:transparent;border:1px solid var(--border);border-radius:0.5rem;padding:8px 16px;font-size:14px;color:var(--foreground);cursor:pointer;">Cancel</button>
      <button onclick="confirmDelete()" style="background:var(--destructive);color:#fff;border:none;border-radius:0.5rem;padding:8px 16px;font-size:14px;font-weight:500;cursor:pointer;">Delete</button>
    </div>
  </div>
</div>

<!-- Sidebar -->
<aside style="width:256px;min-height:100vh;background:var(--sidebar);border-right:1px solid var(--border);padding:16px 12px;display:flex;flex-direction:column;flex-shrink:0;">
  <div style="padding:0 12px;margin-bottom:24px;">
    <div style="font-size:20px;font-weight:700;letter-spacing:-0.025em;">FinTrack</div>
    <div style="font-size:12px;color:var(--muted-foreground);">Personal Finance</div>
  </div>
  <nav style="flex:1;display:flex;flex-direction:column;gap:2px;">
    <a href="dashboard.html" class="nav-item"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/><rect x="3" y="14" width="7" height="7"/><rect x="14" y="14" width="7" height="7"/></svg>Dashboard</a>
    <a href="transactions.html" class="nav-item"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M7 16V4m0 0L3 8m4-4l4 4M17 8v12m0 0l4-4m-4 4l-4-4"/></svg>Transactions</a>
    <a href="recurring.html" class="nav-item nav-active"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M17 2l4 4-4 4"/><path d="M3 11V9a4 4 0 0 1 4-4h14"/><path d="M7 22l-4-4 4-4"/><path d="M21 13v2a4 4 0 0 1-4 4H3"/></svg>Recurring</a>
    <a href="budgets.html" class="nav-item"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 9c0 3.314-3.134 6-7 6s-7-2.686-7-6 3.134-6 7-6 7 2.686 7 6z"/><path d="M5 15.5c0 2.485 3.134 4.5 7 4.5s7-2.015 7-4.5"/></svg>Budgets</a>
    <a href="analytics.html" class="nav-item"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="20" x2="18" y2="10"/><line x1="12" y1="20" x2="12" y2="4"/><line x1="6" y1="20" x2="6" y2="14"/></svg>Analytics</a>
    <a href="scan.html" class="nav-item"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 7V5a2 2 0 0 1 2-2h2"/><path d="M17 3h2a2 2 0 0 1 2 2v2"/><path d="M21 17v2a2 2 0 0 1-2 2h-2"/><path d="M7 21H5a2 2 0 0 1-2-2v-2"/><line x1="3" y1="12" x2="21" y2="12"/></svg>Scan Receipt</a>
    <a href="accounts.html" class="nav-item"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 12V8H4v4"/><path d="M20 12a2 2 0 0 0-2 2v2H6v-2a2 2 0 0 0-2-2"/><path d="M2 8l2-4h16l2 4"/></svg>Accounts</a>
    <a href="credit-cards.html" class="nav-item"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="2" y="5" width="20" height="14" rx="2"/><line x1="2" y1="10" x2="22" y2="10"/></svg>Credit Cards</a>
    <a href="statements.html" class="nav-item"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 2v20l4-2 4 2 4-2 4 2V2z"/><line x1="8" y1="10" x2="16" y2="10"/><line x1="8" y1="14" x2="14" y2="14"/></svg>Statements</a>
    <a href="documents.html" class="nav-item"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="8" y1="13" x2="16" y2="13"/><line x1="8" y1="17" x2="14" y2="17"/></svg>Documents</a>
    <a href="notifications.html" class="nav-item" style="position:relative;"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"/><path d="M13.73 21a2 2 0 0 1-3.46 0"/></svg>Notifications<span style="margin-left:auto;background:var(--destructive);color:#fff;border-radius:9999px;padding:1px 6px;font-size:11px;">3</span></a>
    <a href="settings.html" class="nav-item"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"/><path d="M12 2v2M12 20v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M2 12h2M20 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/></svg>Settings</a>
    <a href="guide.html" class="nav-item"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></svg>User Guide</a>
  </nav>
  <button style="display:flex;align-items:center;gap:12px;padding:8px 12px;font-size:14px;color:var(--muted-foreground);background:transparent;border:none;cursor:pointer;border-radius:0.5rem;width:100%;">
    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" y1="12" x2="9" y2="12"/></svg>Sign out
  </button>
</aside>

<!-- Main -->
<main style="flex:1;padding:24px;overflow-y:auto;">
  <!-- Header -->
  <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:24px;">
    <div>
      <h1 style="font-size:24px;font-weight:700;margin:0;">Recurring Transactions</h1>
      <p style="color:var(--muted-foreground);font-size:14px;margin:4px 0 0;">Auto-generated on schedule</p>
    </div>
    <button class="btn-primary" onclick="openAddSheet()">+ New Recurring</button>
  </div>

  <!-- Filter tabs -->
  <div style="display:flex;gap:4px;background:var(--muted);border-radius:0.625rem;padding:4px;width:fit-content;margin-bottom:24px;">
    <button id="filter-btn-active" onclick="setFilter('active')" style="padding:6px 16px;border-radius:0.5rem;font-size:13px;font-weight:500;border:none;cursor:pointer;background:var(--card);color:var(--foreground);">Active</button>
    <button id="filter-btn-all" onclick="setFilter('all')" style="padding:6px 16px;border-radius:0.5rem;font-size:13px;font-weight:500;border:none;cursor:pointer;background:transparent;color:var(--muted-foreground);">All</button>
  </div>

  <!-- Recurring items -->
  <div style="display:flex;flex-direction:column;gap:12px;" id="items-list">

    <!-- Salary -->
    <div class="card rec-item" data-status="active" data-name="Salary" data-amount="45200" style="padding:20px;display:flex;align-items:center;gap:16px;">
      <div style="width:40px;height:40px;border-radius:50%;background:rgba(21,128,61,0.2);display:flex;align-items:center;justify-content:center;flex-shrink:0;">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#4ade80" stroke-width="2"><path d="M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/></svg>
      </div>
      <div style="flex:1;">
        <div style="font-weight:600;font-size:15px;">Salary</div>
        <div style="font-size:12px;color:var(--muted-foreground);margin-top:2px;">BPI Checking · Monthly · Every 15th</div>
      </div>
      <div style="text-align:right;margin-right:16px;">
        <div style="font-size:16px;font-weight:700;color:#4ade80;">+₱45,200.00</div>
        <div class="next-due-label" style="font-size:12px;color:var(--muted-foreground);">Next: Mar 15, 2026</div>
      </div>
      <span class="status-badge badge badge-green">Income</span>
      <div style="display:flex;gap:4px;">
        <button class="icon-btn" title="Edit" onclick="openEditSheet('Salary', '45200', 'BPI Checking', '2026-03-15')"><svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg></button>
        <button class="icon-btn pause-btn" title="Pause" onclick="togglePause(this)">
          <svg class="pause-icon" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="6" y="4" width="4" height="16"/><rect x="14" y="4" width="4" height="16"/></svg>
          <svg class="resume-icon" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="display:none;"><polygon points="5 3 19 12 5 21 5 3"/></svg>
        </button>
        <button class="icon-btn" title="Delete" style="color:var(--destructive);" onclick="openDeleteModal('Salary')"><svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="3 6 5 6 21 6"/><path d="M19 6l-1 14H6L5 6"/><path d="M10 11v6M14 11v6"/><path d="M9 6V4h6v2"/></svg></button>
      </div>
    </div>

    <!-- Netflix -->
    <div class="card rec-item" data-status="active" data-name="Netflix" data-amount="549" style="padding:20px;display:flex;align-items:center;gap:16px;">
      <div style="width:40px;height:40px;border-radius:50%;background:rgba(153,27,27,0.2);display:flex;align-items:center;justify-content:center;flex-shrink:0;">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#f87171" stroke-width="2"><rect x="2" y="7" width="20" height="14" rx="2"/><path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"/></svg>
      </div>
      <div style="flex:1;">
        <div style="font-weight:600;font-size:15px;">Netflix</div>
        <div style="font-size:12px;color:var(--muted-foreground);margin-top:2px;">BPI Checking · Monthly · Every 1st</div>
      </div>
      <div style="text-align:right;margin-right:16px;">
        <div style="font-size:16px;font-weight:700;color:#f87171;">-₱549.00</div>
        <div class="next-due-label" style="font-size:12px;color:var(--muted-foreground);">Next: Mar 1, 2026</div>
      </div>
      <span class="status-badge badge badge-red">Expense</span>
      <div style="display:flex;gap:4px;">
        <button class="icon-btn" title="Edit" onclick="openEditSheet('Netflix', '549', 'BPI Checking', '2026-03-01')"><svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg></button>
        <button class="icon-btn pause-btn" title="Pause" onclick="togglePause(this)">
          <svg class="pause-icon" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="6" y="4" width="4" height="16"/><rect x="14" y="4" width="4" height="16"/></svg>
          <svg class="resume-icon" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="display:none;"><polygon points="5 3 19 12 5 21 5 3"/></svg>
        </button>
        <button class="icon-btn" title="Delete" style="color:var(--destructive);" onclick="openDeleteModal('Netflix')"><svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="3 6 5 6 21 6"/><path d="M19 6l-1 14H6L5 6"/><path d="M10 11v6M14 11v6"/><path d="M9 6V4h6v2"/></svg></button>
      </div>
    </div>

    <!-- Gym -->
    <div class="card rec-item" data-status="active" data-name="Gym Membership" data-amount="1500" style="padding:20px;display:flex;align-items:center;gap:16px;">
      <div style="width:40px;height:40px;border-radius:50%;background:rgba(153,27,27,0.2);display:flex;align-items:center;justify-content:center;flex-shrink:0;">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#f87171" stroke-width="2"><path d="M6.5 6.5h11M6.5 17.5h11M3 12h18"/><circle cx="6.5" cy="6.5" r="2"/><circle cx="17.5" cy="6.5" r="2"/><circle cx="6.5" cy="17.5" r="2"/><circle cx="17.5" cy="17.5" r="2"/></svg>
      </div>
      <div style="flex:1;">
        <div style="font-weight:600;font-size:15px;">Gym Membership</div>
        <div style="font-size:12px;color:var(--muted-foreground);margin-top:2px;">Cash · Monthly · Every 1st</div>
      </div>
      <div style="text-align:right;margin-right:16px;">
        <div style="font-size:16px;font-weight:700;color:#f87171;">-₱1,500.00</div>
        <div class="next-due-label" style="font-size:12px;color:var(--muted-foreground);">Next: Mar 1, 2026</div>
      </div>
      <span class="status-badge badge badge-red">Expense</span>
      <div style="display:flex;gap:4px;">
        <button class="icon-btn" title="Edit" onclick="openEditSheet('Gym Membership', '1500', 'Cash', '2026-03-01')"><svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg></button>
        <button class="icon-btn pause-btn" title="Pause" onclick="togglePause(this)">
          <svg class="pause-icon" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="6" y="4" width="4" height="16"/><rect x="14" y="4" width="4" height="16"/></svg>
          <svg class="resume-icon" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="display:none;"><polygon points="5 3 19 12 5 21 5 3"/></svg>
        </button>
        <button class="icon-btn" title="Delete" style="color:var(--destructive);" onclick="openDeleteModal('Gym Membership')"><svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="3 6 5 6 21 6"/><path d="M19 6l-1 14H6L5 6"/><path d="M10 11v6M14 11v6"/><path d="M9 6V4h6v2"/></svg></button>
      </div>
    </div>

    <!-- Spotify -->
    <div class="card rec-item" data-status="active" data-name="Spotify" data-amount="169" style="padding:20px;display:flex;align-items:center;gap:16px;">
      <div style="width:40px;height:40px;border-radius:50%;background:rgba(153,27,27,0.2);display:flex;align-items:center;justify-content:center;flex-shrink:0;">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#f87171" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M8 14.5c2.5-1 5.5-1 8 0"/><path d="M6.5 11.5c3.5-1.5 7.5-1.5 11 0"/><path d="M9 8.5c2-0.8 4-0.8 6 0"/></svg>
      </div>
      <div style="flex:1;">
        <div style="font-weight:600;font-size:15px;">Spotify</div>
        <div style="font-size:12px;color:var(--muted-foreground);margin-top:2px;">BPI Checking · Monthly · Every 5th</div>
      </div>
      <div style="text-align:right;margin-right:16px;">
        <div style="font-size:16px;font-weight:700;color:#f87171;">-₱169.00</div>
        <div class="next-due-label" style="font-size:12px;color:var(--muted-foreground);">Next: Mar 5, 2026</div>
      </div>
      <span class="status-badge badge badge-red">Expense</span>
      <div style="display:flex;gap:4px;">
        <button class="icon-btn" title="Edit" onclick="openEditSheet('Spotify', '169', 'BPI Checking', '2026-03-05')"><svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg></button>
        <button class="icon-btn pause-btn" title="Pause" onclick="togglePause(this)">
          <svg class="pause-icon" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="6" y="4" width="4" height="16"/><rect x="14" y="4" width="4" height="16"/></svg>
          <svg class="resume-icon" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="display:none;"><polygon points="5 3 19 12 5 21 5 3"/></svg>
        </button>
        <button class="icon-btn" title="Delete" style="color:var(--destructive);" onclick="openDeleteModal('Spotify')"><svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="3 6 5 6 21 6"/><path d="M19 6l-1 14H6L5 6"/><path d="M10 11v6M14 11v6"/><path d="M9 6V4h6v2"/></svg></button>
      </div>
    </div>

    <!-- Internet — paused -->
    <div class="card rec-item" data-status="paused" data-name="Internet (PLDT)" data-amount="1899" style="padding:20px;display:flex;align-items:center;gap:16px;opacity:0.6;">
      <div style="width:40px;height:40px;border-radius:50%;background:rgba(75,85,99,0.3);display:flex;align-items:center;justify-content:center;flex-shrink:0;">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#9ca3af" stroke-width="2"><circle cx="12" cy="12" r="10"/><line x1="2" y1="12" x2="22" y2="12"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10A15.3 15.3 0 0 1 12 2z"/></svg>
      </div>
      <div style="flex:1;">
        <div style="font-weight:600;font-size:15px;">Internet (PLDT)</div>
        <div style="font-size:12px;color:var(--muted-foreground);margin-top:2px;">BPI Checking · Monthly · Every 10th</div>
      </div>
      <div style="text-align:right;margin-right:16px;">
        <div style="font-size:16px;font-weight:700;color:#9ca3af;">-₱1,899.00</div>
        <div class="next-due-label" style="font-size:12px;color:var(--muted-foreground);">Paused</div>
      </div>
      <span class="status-badge badge badge-gray">Paused</span>
      <div style="display:flex;gap:4px;">
        <button class="icon-btn" title="Edit" onclick="openEditSheet('Internet (PLDT)', '1899', 'BPI Checking', '2026-03-10')"><svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg></button>
        <button class="icon-btn pause-btn" title="Resume" onclick="togglePause(this)" style="color:var(--primary);">
          <svg class="pause-icon" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="display:none;"><rect x="6" y="4" width="4" height="16"/><rect x="14" y="4" width="4" height="16"/></svg>
          <svg class="resume-icon" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="5 3 19 12 5 21 5 3"/></svg>
        </button>
        <button class="icon-btn" title="Delete" style="color:var(--destructive);" onclick="openDeleteModal('Internet (PLDT)')"><svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="3 6 5 6 21 6"/><path d="M19 6l-1 14H6L5 6"/><path d="M10 11v6M14 11v6"/><path d="M9 6V4h6v2"/></svg></button>
      </div>
    </div>

    <!-- Electricity -->
    <div class="card rec-item" data-status="active" data-name="Electricity (Meralco)" data-amount="3200" style="padding:20px;display:flex;align-items:center;gap:16px;">
      <div style="width:40px;height:40px;border-radius:50%;background:rgba(153,27,27,0.2);display:flex;align-items:center;justify-content:center;flex-shrink:0;">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#f87171" stroke-width="2"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg>
      </div>
      <div style="flex:1;">
        <div style="font-weight:600;font-size:15px;">Electricity (Meralco)</div>
        <div style="font-size:12px;color:var(--muted-foreground);margin-top:2px;">BPI Checking · Monthly · Every 15th</div>
      </div>
      <div style="text-align:right;margin-right:16px;">
        <div style="font-size:16px;font-weight:700;color:#f87171;">-₱3,200.00</div>
        <div class="next-due-label" style="font-size:12px;color:var(--muted-foreground);">Next: Mar 15, 2026</div>
      </div>
      <span class="status-badge badge badge-red">Expense</span>
      <div style="display:flex;gap:4px;">
        <button class="icon-btn" title="Edit" onclick="openEditSheet('Electricity (Meralco)', '3200', 'BPI Checking', '2026-03-15')"><svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg></button>
        <button class="icon-btn pause-btn" title="Pause" onclick="togglePause(this)">
          <svg class="pause-icon" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="6" y="4" width="4" height="16"/><rect x="14" y="4" width="4" height="16"/></svg>
          <svg class="resume-icon" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="display:none;"><polygon points="5 3 19 12 5 21 5 3"/></svg>
        </button>
        <button class="icon-btn" title="Delete" style="color:var(--destructive);" onclick="openDeleteModal('Electricity (Meralco)')"><svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="3 6 5 6 21 6"/><path d="M19 6l-1 14H6L5 6"/><path d="M10 11v6M14 11v6"/><path d="M9 6V4h6v2"/></svg></button>
      </div>
    </div>

  </div><!-- end list -->
</main>

<script>
  // ── Sheet helpers ──────────────────────────────────────────────────────────
  function openAddSheet() {
    document.getElementById('add-sheet').style.display = 'block';
    document.getElementById('overlay').style.display = 'block';
  }

  function openEditSheet(name, amount, account, date) {
    document.getElementById('edit-name').value = name;
    document.getElementById('edit-amount').value = amount;
    document.getElementById('edit-date').value = date;
    var sel = document.getElementById('edit-account');
    for (var i = 0; i < sel.options.length; i++) {
      if (sel.options[i].text === account) { sel.selectedIndex = i; break; }
    }
    document.getElementById('edit-sheet').style.display = 'block';
    document.getElementById('overlay').style.display = 'block';
  }

  function closeAllSheets() {
    document.getElementById('add-sheet').style.display = 'none';
    document.getElementById('edit-sheet').style.display = 'none';
    document.getElementById('overlay').style.display = 'none';
  }

  // ── Delete modal ───────────────────────────────────────────────────────────
  var _deleteTarget = null;

  function openDeleteModal(name) {
    _deleteTarget = name;
    document.getElementById('delete-modal-desc').textContent =
      'Delete "' + name + '"? This cannot be undone. The rule will stop generating transactions.';
    var modal = document.getElementById('delete-modal');
    modal.style.display = 'flex';
  }

  function closeDeleteModal() {
    document.getElementById('delete-modal').style.display = 'none';
    _deleteTarget = null;
  }

  function confirmDelete() {
    // Find the row with matching data-name and remove it
    if (_deleteTarget) {
      var items = document.querySelectorAll('.rec-item');
      items.forEach(function(item) {
        if (item.dataset.name === _deleteTarget) {
          item.remove();
        }
      });
    }
    closeDeleteModal();
  }

  // Close modal on backdrop click
  document.getElementById('delete-modal').addEventListener('click', closeDeleteModal);

  // ── Pause / Resume toggle ─────────────────────────────────────────────────
  function togglePause(btn) {
    var card = btn.closest('.rec-item');
    var pauseIcon = btn.querySelector('.pause-icon');
    var resumeIcon = btn.querySelector('.resume-icon');
    var badge = card.querySelector('.status-badge');
    var nextLabel = card.querySelector('.next-due-label');
    var isPaused = card.dataset.status === 'paused';

    if (isPaused) {
      // Resume
      card.dataset.status = 'active';
      card.style.opacity = '1';
      pauseIcon.style.display = 'block';
      resumeIcon.style.display = 'none';
      btn.title = 'Pause';
      btn.style.color = '';
      badge.className = 'status-badge badge badge-red';
      badge.textContent = 'Expense';
      nextLabel.textContent = 'Next: Mar 10, 2026';
    } else {
      // Pause
      card.dataset.status = 'paused';
      card.style.opacity = '0.6';
      pauseIcon.style.display = 'none';
      resumeIcon.style.display = 'block';
      btn.title = 'Resume';
      btn.style.color = 'var(--primary)';
      badge.className = 'status-badge badge badge-gray';
      badge.textContent = 'Paused';
      nextLabel.textContent = 'Paused';
    }

    // Re-apply filter
    applyFilter();
  }

  // ── Filter tabs ────────────────────────────────────────────────────────────
  var _currentFilter = 'active';

  function setFilter(filter) {
    _currentFilter = filter;
    document.getElementById('filter-btn-active').style.background = filter === 'active' ? 'var(--card)' : 'transparent';
    document.getElementById('filter-btn-active').style.color = filter === 'active' ? 'var(--foreground)' : 'var(--muted-foreground)';
    document.getElementById('filter-btn-all').style.background = filter === 'all' ? 'var(--card)' : 'transparent';
    document.getElementById('filter-btn-all').style.color = filter === 'all' ? 'var(--foreground)' : 'var(--muted-foreground)';
    applyFilter();
  }

  function applyFilter() {
    var items = document.querySelectorAll('.rec-item');
    items.forEach(function(item) {
      if (_currentFilter === 'all') {
        item.style.display = 'flex';
      } else {
        item.style.display = item.dataset.status === 'active' ? 'flex' : 'none';
      }
    });
  }

  // Init: hide paused items by default (filter is 'active')
  applyFilter();
</script>
</body>
</html>
