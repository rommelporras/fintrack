# Phase 5: Onboarding + Card UX (H2 + H7)

Date: 2026-02-20

## Scope

Two high-priority issues plus opportunistic fixes:

- **H2** — No onboarding; blank dashboard gives no direction
- **H7** — Credit card setup requires two separate pages
- **M4** — Credit limit not in card creation form (free fix alongside H7)
- Empty state consistency across Accounts, Cards, Budgets pages

## H2: Dashboard Onboarding Checklist

### Component

`OnboardingChecklist` rendered at the top of the dashboard, replacing the existing "Welcome to FinTrack" card.

### Data

The dashboard already fetches summary, transactions, and net worth. Two additional lightweight calls added to the existing `Promise.all`:

- `GET /accounts`
- `GET /credit-cards`

### Steps

| # | Label | Link | Complete when |
|---|---|---|---|
| 1 | Create your first account | `/accounts` | `accounts.length > 0` |
| 2 | Add a credit card | `/cards` | `cards.length > 0` |
| 3 | Record a transaction | `/transactions/new` | `transactions.length > 0` |

### Visual

Dashed-border `Card`. Header: "Get Started" with a dismiss X button. Body: three rows with circle/checkmark, label as link, right arrow. Footer: "X of 3 complete" progress text.

### Dismiss Logic

- `localStorage.getItem("fintrack_onboarding_dismissed")` checked on mount
- Dismiss X sets it to `"true"` and hides the card
- Auto-hides when all 3 steps are complete (no localStorage write — data speaks for itself)
- Component not rendered at all when dismissed or complete

## H7: Card Form Auto-Account Creation

### Account Select Change

The existing account `Select` in the card creation dialog gets an extra option at the top:

- Label: `"+ Create new account"`
- Value: `"__new__"` (sentinel)

### Inline Account Name Field

When `"__new__"` is selected, an `Input` appears below the Select:

- Label: "Account name"
- Pre-filled reactively with `"{bankName} Credit Card"` as the user types the bank name
- Editable by the user

### Submit Flow (new account path)

1. `POST /accounts` with `{ name, type: "credit_card", opening_balance: 0 }`
2. On success: `POST /credit-cards` with `{ account_id: newId, ... }`
3. On step 1 failure: show error, stop
4. On step 2 failure: show error. Orphaned account is harmless.

### Submit Flow (existing account path)

Unchanged — single `POST /credit-cards`.

### M4: Credit Limit Field

Added to the card creation form as an optional `Input type="number"`:

- Label: "Credit Limit (₱)"
- Placeholder: "0.00"
- Placed after the Last 4 Digits field
- Sent as `credit_limit` in the POST body (API already supports it)

## Empty State Consistency

### Pages to Fix

Accounts, Cards, Budgets. Dashboard gets the checklist. Transactions already has a good empty state.

### Visual Pattern

Dashed-border `Card`, centered content:

```
┌ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ┐
│          [lucide icon]            │
│        Headline text              │
│     Subtitle / description        │
│         [ CTA Button ]            │
└ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ┘
```

Muted icon (48px), `text-lg font-medium` headline, `text-sm text-muted-foreground` subtitle, primary `Button` with `Plus` icon.

### Per-Page Content

| Page | Icon | Headline | Subtitle | CTA | Action |
|---|---|---|---|---|---|
| Accounts | `Wallet` | No accounts yet | Add your first account to start tracking your finances | Add Account | Opens create dialog |
| Cards | `CreditCard` | No credit cards yet | Add a card to track statements and due dates | Add Card | Opens create dialog |
| Budgets | `PiggyBank` | No budgets yet | Set a budget to track your spending against limits | Add Budget | Opens create sheet |

CTA buttons trigger the same open-state setter as the existing header "Add" buttons.

### Implementation Notes

- Inline pattern per page, not a shared component (each CTA triggers different UI: dialog, sheet, navigation)
- No API changes needed for empty states
- No new dependencies
